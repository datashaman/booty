---
phase: 43-dedup-alignment
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/capabilities-summary.md
autonomous: true

must_haves:
  truths:
    - Issue agent dedup keys are documented (Planner, Builder, Architect)
    - DEDUP-02: Issue agents use documented dedup keys
  artifacts:
    - path: docs/capabilities-summary.md
      provides: Dedup key documentation for all agents
  key_links:
    - from: docs/capabilities-summary.md
      to: src/booty/planner/jobs.py
      via: Planner dedup key documented
    - from: docs/capabilities-summary.md
      to: src/booty/jobs.py
      via: Builder dedup key documented
---

<objective>
Document dedup keys for issue agents. DEDUP-02.

Purpose: Provide auditable documentation of dedup key standard for Planner, Builder, Architect.
Output: Dedup keys section in docs/capabilities-summary.md or dedicated DEDUP-KEYS.md.
</objective>

<execution_context>
@/Users/marlinf/.claude/get-shit-done/workflows/execute-plan.md
@/Users/marlinf/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/REQUIREMENTS.md
@.planning/phases/43-dedup-alignment/43-CONTEXT.md
@.planning/phases/43-dedup-alignment/43-RESEARCH.md
@docs/capabilities-summary.md
</context>

<tasks>

<task type="auto">
  <name>Add dedup keys documentation</name>
  <files>docs/capabilities-summary.md</files>
  <action>
Add a "Dedup Keys" section to docs/capabilities-summary.md (or create docs/DEDUP-KEYS.md and link from capabilities-summary):

**PR agents (Verifier, Reviewer, Security):**
- Key: (repo_full_name, pr_number, head_sha)
- Serialization: "{repo_full_name}:{pr_number}:{head_sha}"
- Purpose: Same PR+commit = same work; repo required for multi-tenant correctness

**Issue agents:**
- Planner: (repo, delivery_id) — delivery_id is GitHub X-GitHub-Delivery; globally unique per webhook
- Builder (issue-driven): (repo, delivery_id) — same as Planner for issue-triggered jobs
- Builder (plan-driven): (repo, plan_hash) — Phase 44; reserve in doc
- Architect: TBD Phase 44 — reserve slot in documentation

Keep existing capabilities-summary content; add or extend as appropriate.
</action>
  <verify>grep -n "dedup\|DEDUP\|repo_full_name.*pr_number.*head_sha" docs/capabilities-summary.md docs/DEDUP-KEYS.md 2>/dev/null | head -20</verify>
  <done>Dedup keys documented for all agents</done>
</task>

</tasks>

<verification>
- DEDUP-02: Issue agents use documented dedup keys
- PR agent keys documented (from 43-01)
- Architect reserved for Phase 44
</verification>

<success_criteria>
- docs/capabilities-summary.md or docs/DEDUP-KEYS.md contains dedup key table
- Planner, Builder, Architect slots documented
</success_criteria>

<output>
After completion, create .planning/phases/43-dedup-alignment/43-02-SUMMARY.md
</output>
