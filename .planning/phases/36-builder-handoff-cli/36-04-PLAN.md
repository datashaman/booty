---
phase: 36-builder-handoff-cli
plan: 04
type: execute
wave: 3
depends_on: ['03']
files_modified:
  - src/booty/cli.py
  - src/booty/architect/review.py
autonomous: true

must_haves:
  truths:
    - booty architect status shows enabled, plans reviewed (24h), rewrites, blocks, cache_hits
    - booty architect review --issue N forces re-evaluation
  artifacts:
    - path: src/booty/cli.py
      provides: architect group, architect status, architect review commands
  key_links:
    - from: booty architect status
      to: get_24h_stats
      via: reads metrics
      pattern: get_24h_stats
---

<objective>
CLI: booty architect status and booty architect review --issue N.

Purpose: ARCH-29 — status shows enabled, plans reviewed (24h), rewrites count. ARCH-30 — review --issue N forces re-evaluation. CONTEXT: key-value lines, --repo/--json, review infers repo from git, exit 1 on block.
Output: architect status and review commands in cli.py.
</objective>

<execution_context>
@/Users/marlinf/.claude/get-shit-done/workflows/execute-plan.md
@/Users/marlinf/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/36-builder-handoff-cli/36-CONTEXT.md
@.planning/phases/36-builder-handoff-cli/36-RESEARCH.md
@src/booty/cli.py
@src/booty/memory/config.py
@src/booty/release_governor/store.py
</context>

<tasks>

<task type="auto">
  <name>Add booty architect status command</name>
  <files>src/booty/cli.py</files>
  <action>
Add architect group and status command.
- @cli.group() architect
- @architect.command("status"); options: --repo, --json, --workspace (default ".")
- Repo: infer from git cwd; optional --repo override; fail clearly if neither.
- Load .booty.yml; get_architect_config; enabled = (config and config.enabled) after apply_architect_env_overrides.
- Read get_24h_stats() from architect.metrics.
- Output (CONTEXT: key-value lines): enabled: true|false, plans_approved: N, plans_rewritten: N, plans_blocked: N, cache_hits: N. Use approved not reviewed for consistency with metrics (get_24h_stats returns approved/rewritten/blocked/cache_hits).
- --json: same keys as dict.
</action>
  <verify>booty architect status 2>/dev/null | head -5; booty architect status --json 2>/dev/null | python -m json.tool</verify>
  <done>booty architect status prints enabled and 24h breakdown; --json works</done>
</task>

<task type="auto">
  <name>Add booty architect review --issue N command</name>
  <files>src/booty/cli.py, src/booty/architect/review.py</files>
  <action>
Add architect review command: booty architect review --issue N.
- Options: --issue (required), --repo, --workspace.
- Repo: infer from git; --repo override; fail if neither.
- "Force re-evaluation": load issue from GitHub, normalize input, run Planner (generate_plan), run Architect (process_architect_input). Bypass cache: do not check find_cached_architect_result; always run Architect.
- On approve: output goal (first line), step count, risk level, outcome "approved" or "rewritten". Exit 0.
- On block: exit 1 with message "Architect blocked — see comment on issue #N" (or similar per CONTEXT).
- Non-interactive, suitable for CI. No prompts.
- Implementation: architect/review.py force_architect_review(owner, repo, issue_number, token) -> ("approved"|"rewritten"|"blocked", ArchitectPlan|None, str|None). CLI calls it and formats output.
</action>
  <verify>booty architect review --issue 1 --repo owner/repo 2>/dev/null; echo "exit=$?"</verify>
  <done>booty architect review forces re-eval; approve/rewrite exit 0; block exit 1</done>
</task>

</tasks>

<verification>
- booty architect status: enabled, approved/rewritten/blocked/cache_hits
- booty architect review: forces Architect run; correct exit codes
</verification>

<success_criteria>
- ARCH-29: booty architect status
- ARCH-30: booty architect review --issue N
- Key-value format; --json; review exit 1 on block
</success_criteria>

<output>
After completion, create `.planning/phases/36-builder-handoff-cli/36-04-SUMMARY.md`
</output>
