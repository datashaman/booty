---
phase: 37-skeleton-check-plumbing
plan: 02
type: execute
wave: 2
depends_on: [01]
files_modified:
  - src/booty/github/checks.py
  - tests/test_github_checks.py
autonomous: true

must_haves:
  truths:
    - "create_reviewer_check_run creates booty/reviewer check with queued status"
    - "Check run uses same GitHub App auth as Verifier (get_verifier_repo)"
    - "Returns None when App credentials missing"
  artifacts:
    - path: src/booty/github/checks.py
      provides: create_reviewer_check_run
  key_links:
    - from: create_reviewer_check_run
      to: get_verifier_repo
      via: repo = get_verifier_repo(...)
---

<objective>
Add create_reviewer_check_run to github/checks.py for booty/reviewer check run lifecycle (REV-04).

Purpose: Check run creation for queued → in_progress → success|failure. Uses existing edit_check_run for updates. Same GitHub App as Verifier.
Output: create_reviewer_check_run in checks.py; tests.
</objective>

<execution_context>
@/Users/marlinf/.claude/get-shit-done/workflows/execute-plan.md
@/Users/marlinf/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/37-skeleton-check-plumbing/37-RESEARCH.md
@.planning/phases/37-skeleton-check-plumbing/37-CONTEXT.md
@src/booty/github/checks.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: create_reviewer_check_run</name>
  <files>src/booty/github/checks.py</files>
  <action>
Add create_reviewer_check_run to checks.py, mirroring create_security_check_run:

Signature:
```python
def create_reviewer_check_run(
    owner: str,
    repo_name: str,
    head_sha: str,
    installation_id: int,
    settings: Settings,
    *,
    status: str = "queued",
    output: dict[str, Any] | None = None,
    details_url: str | None = None,
) -> "CheckRun | None":
```

- Use get_verifier_repo (same GitHub App as Verifier)
- Returns None if repo is None (App disabled)
- name="booty/reviewer"
- output default: {"title": "Booty Reviewer", "summary": "Queued for review…"} when status="queued"
- For status="in_progress": caller passes output={"title": "Booty Reviewer", "summary": "Reviewing PR diff for engineering quality…"}
- Support details_url in kwargs
- Use repo.create_check_run(**kwargs)
  </action>
  <verify>python -c "from booty.github.checks import create_reviewer_check_run; print(create_reviewer_check_run.__name__)"</verify>
  <done>create_reviewer_check_run exists; same pattern as create_check_run/create_security_check_run</done>
</task>

<task type="auto">
  <name>Task 2: Tests for create_reviewer_check_run</name>
  <files>tests/test_github_checks.py</files>
  <action>
Add or extend tests/test_github_checks.py:

1. test_create_reviewer_check_run_returns_none_when_app_disabled: Mock settings with empty GITHUB_APP_ID -> returns None
2. test_create_reviewer_check_run_calls_repo_create_check_run: Mock get_verifier_repo to return mock repo; assert create_check_run called with name="booty/reviewer", status="queued", output title "Booty Reviewer"

Use unittest.mock or pytest fixtures. Mirror existing tests for create_check_run or create_security_check_run if present.
  </action>
  <verify>pytest tests/test_github_checks.py -v -k reviewer</verify>
  <done>create_reviewer_check_run tests pass</done>
</task>

</tasks>

<verification>
- pytest tests/test_github_checks.py passes
- create_reviewer_check_run returns CheckRun when App configured, None when not
- edit_check_run (existing) works for status/conclusion updates — no changes needed
</verification>

<success_criteria>
- [ ] create_reviewer_check_run in checks.py
- [ ] name="booty/reviewer", output defaults per CONTEXT
- [ ] Tests pass
</success_criteria>

<output>
After completion, create .planning/phases/37-skeleton-check-plumbing/37-02-SUMMARY.md
</output>
