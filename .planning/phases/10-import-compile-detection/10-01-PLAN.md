---
phase: 10-import-compile-detection
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/booty/test_runner/config.py
autonomous: true

must_haves:
  truths:
    - "BootyConfigV1 has install_command field (optional)"
    - ".booty.yml schema v1 accepts install_command for dependency installation"
  artifacts:
    - path: src/booty/test_runner/config.py
      provides: install_command in BootyConfigV1
      contains: "install_command"
  key_links:
    - from: BootyConfigV1
      to: install_command
      via: Field declaration
      pattern: install_command
---

<objective>
Add install_command to BootyConfigV1 schema. Required for full import validation; agent PRs without it fail. Non-agent PRs can skip import validation when absent.

Purpose: VERIFY-12 and CONTEXT — install_command runs before import sweep to populate workspace with deps.
Output: BootyConfigV1 with install_command: str | None
</objective>

<execution_context>
@/Users/marlinf/.claude/get-shit-done/workflows/execute-plan.md
@/Users/marlinf/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-import-compile-detection/10-RESEARCH.md
@.planning/phases/10-import-compile-detection/10-CONTEXT.md
@src/booty/test_runner/config.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add install_command to BootyConfigV1</name>
  <files>src/booty/test_runner/config.py</files>
  <action>
Add install_command field to BootyConfigV1 (after setup_command):

- install_command: str | None = Field(default=None, description="Command to install deps (e.g. 'pip install -r requirements.txt'). Required for agent PRs when import validation runs.")
- Place after setup_command for logical grouping of "prepare env" commands
- No validator needed — allow empty string (caller checks for presence)
</action>
  <verify>
cd /Users/marlinf/Projects/datashaman/booty && python -c "
from booty.test_runner.config import BootyConfigV1
c = BootyConfigV1.model_validate({'schema_version': 1, 'test_command': 'pytest'})
assert hasattr(c, 'install_command')
assert c.install_command is None
c2 = BootyConfigV1.model_validate({'schema_version': 1, 'test_command': 'pytest', 'install_command': 'pip install -r req.txt'})
assert c2.install_command == 'pip install -r req.txt'
print('OK: install_command field')
"
  </verify>
  <done>BootyConfigV1 has install_command; schema accepts it; default None.</done>
</task>

</tasks>

<verification>
- BootyConfigV1.model_validate with install_command succeeds
- Existing .booty.yml v1 configs without install_command still load (default None)
</verification>

<success_criteria>
- install_command added to BootyConfigV1
- Backward compatible: omit or null = None
- Schema docs reference purpose for Verifier import validation
</success_criteria>

<output>
After completion, create `.planning/phases/10-import-compile-detection/10-01-SUMMARY.md`
</output>
