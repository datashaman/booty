# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-14
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1 Scope

### REQ-01: Webhook Event Reception
**Category:** Table Stakes | **Complexity:** Medium | **Phase:** 1
The system receives GitHub webhook events, validates signatures using HMAC-SHA256, filters for issue `labeled` events matching the configured label (e.g. `agent:builder`), and enqueues jobs immediately (returning 200 OK within seconds).
**Outcome:** ✅ Shipped — HMAC-SHA256 verification, label filtering, returns 202 immediately

### REQ-02: Idempotent Job Processing
**Category:** Table Stakes | **Complexity:** Low | **Phase:** 1
The system deduplicates webhook events using issue URL + event timestamp. Processing the same event twice produces no side effects (no duplicate PRs, no duplicate comments).
**Outcome:** ✅ Shipped — Delivery ID tracking with 10k cap, duplicate check before enqueue

### REQ-03: Fresh Workspace Isolation
**Category:** Table Stakes | **Complexity:** Low | **Phase:** 1
Each job gets a fresh clone of the target repository in a temporary directory. No state persists between jobs. Workspaces are cleaned up after job completion or failure.
**Outcome:** ✅ Shipped — TemporaryDirectory per job, cleanup in finally block

### REQ-04: Configurable Target Repository
**Category:** Table Stakes | **Complexity:** Low | **Phase:** 1
The target repository URL, branch, label, and credentials are configurable via environment variables or config file. Not hardcoded to a single repo.
**Outcome:** ✅ Shipped — Pydantic Settings with TARGET_REPO_URL, TARGET_BRANCH, TRIGGER_LABEL

### REQ-05: Async Job Execution
**Category:** Table Stakes | **Complexity:** Medium | **Phase:** 1
Webhook handler enqueues work and returns immediately. Heavy processing (clone, LLM, tests, PR) runs asynchronously. Job state is tracked (queued, running, completed, failed).
**Outcome:** ✅ Shipped — asyncio.Queue + background workers, webhook returns immediately

### REQ-06: Structured Logging
**Category:** Table Stakes | **Complexity:** Low | **Phase:** 1
All operations produce structured (JSON) log output with correlation IDs linking webhook event → job → actions. Issue number and job ID included in every log entry.
**Outcome:** ✅ Shipped — structlog JSONRenderer, correlation IDs, job_id/issue_number bound

### REQ-07: Issue Analysis via LLM
**Category:** Table Stakes | **Complexity:** Medium | **Phase:** 2
The system uses magentic to analyze GitHub issue title, body, and comments. Extracts: what needs to change, which files are affected, acceptance criteria. Produces structured analysis for code generation.
**Outcome:** ✅ Shipped — magentic @prompt → IssueAnalysis with files, criteria, commit metadata

### REQ-08: LLM Code Generation
**Category:** Table Stakes | **Complexity:** Medium | **Phase:** 2
The system uses magentic to generate code changes based on issue analysis. Loads relevant source files as context with token budgeting. Applies changes to the workspace. Uses temperature=0 for deterministic output.
**Outcome:** ✅ Shipped — generate_code_changes → CodeGenerationPlan with full file contents

### REQ-09: Context Budget Management
**Category:** Table Stakes | **Complexity:** Medium | **Phase:** 2
LLM calls track token usage against model context limits. Files are selected by relevance and pruned to fit within budget. Context overflow is detected and handled gracefully (reduce scope, not silently truncate).
**Outcome:** ✅ Shipped — Anthropic count_tokens API, budget check, file selection fallback

### REQ-10: PR Creation with Explanation
**Category:** Table Stakes | **Complexity:** Low | **Phase:** 2
The system creates a GitHub PR with: conventional commit messages, structured description (summary, approach, testing notes), issue cross-reference (Fixes #N), and co-author attribution.
**Outcome:** ✅ Shipped — Conventional commits, structured PR body, Fixes #N reference

### REQ-11: Multi-File Changes
**Category:** Table Stakes | **Complexity:** Medium | **Phase:** 2
The system can modify, create, or delete multiple files in a single PR. Changes are coordinated (e.g. new function + import + test).
**Outcome:** ✅ Shipped — create/modify/delete operations committed atomically

### REQ-12: Test Execution
**Category:** Table Stakes | **Complexity:** Low | **Phase:** 3
The system runs the target repo's test suite (or relevant subset) via subprocess with configurable timeout. Captures pass/fail status, stdout, stderr, and exit code.
**Outcome:** ✅ Shipped — async subprocess with configurable timeout, captures exit code/stdout/stderr

### REQ-13: Iterative Refinement
**Category:** Differentiator | **Complexity:** High | **Phase:** 3
On test failure, the system feeds error output back to the LLM and regenerates code. Retries up to N times (configurable). Each iteration includes previous error context. Stops when tests pass or max retries reached.
**Outcome:** ✅ Shipped — Loop up to max_retries, error feedback to LLM, regenerates affected files

### REQ-14: Error Recovery and Notification
**Category:** Table Stakes | **Complexity:** Medium | **Phase:** 3
On permanent failure, the system: comments on the GitHub issue with error details, opens a draft PR with partial work (if any), marks the job as failed. Transient errors (API timeout, rate limit) retry with exponential backoff.
**Outcome:** ✅ Shipped — Draft PR on failure, issue comment with error details, exponential backoff

### REQ-15: Basic Security — Path Restrictions
**Category:** Table Stakes | **Complexity:** Low | **Phase:** 2
Generated code changes are restricted to allowed paths. Modifications to security-sensitive files (.github/workflows, .env, credentials) are flagged or blocked. Issue content is treated as untrusted input.
**Outcome:** ✅ Shipped — PathRestrictor with pathspec, canonical path resolution

### REQ-16: Self-Modification
**Category:** Differentiator | **Complexity:** High | **Phase:** 4
Booty can process issues against its own repository. The same pipeline (analyze → generate → test → PR) works when the target repo is Booty itself. Self-PRs follow the same quality gates as external repos.
**Outcome:** ✅ Shipped — Self-target detection, protected paths, quality gates, draft PR enforcement

### REQ-17: Deterministic Configuration
**Category:** Table Stakes | **Complexity:** Low | **Phase:** 1
LLM temperature, model selection, timeout values, retry limits, and all operational parameters are configurable. Defaults are deterministic (temperature=0, sorted file ordering).
**Outcome:** ✅ Shipped — All params configurable, LLM_TEMPERATURE=0.0 default

---

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| REQ-01 | Phase 1 | ✅ Complete |
| REQ-02 | Phase 1 | ✅ Complete |
| REQ-03 | Phase 1 | ✅ Complete |
| REQ-04 | Phase 1 | ✅ Complete |
| REQ-05 | Phase 1 | ✅ Complete |
| REQ-06 | Phase 1 | ✅ Complete |
| REQ-17 | Phase 1 | ✅ Complete |
| REQ-07 | Phase 2 | ✅ Complete |
| REQ-08 | Phase 2 | ✅ Complete |
| REQ-09 | Phase 2 | ✅ Complete |
| REQ-10 | Phase 2 | ✅ Complete |
| REQ-11 | Phase 2 | ✅ Complete |
| REQ-15 | Phase 2 | ✅ Complete |
| REQ-12 | Phase 3 | ✅ Complete |
| REQ-13 | Phase 3 | ✅ Complete |
| REQ-14 | Phase 3 | ✅ Complete |
| REQ-16 | Phase 4 | ✅ Complete |

**Coverage:** 17/17 v1 requirements shipped (100%)

---

## Milestone Summary

**Shipped:** 17 of 17 v1 requirements
**Adjusted:** None — all requirements shipped as originally specified
**Dropped:** None

---
*Archived: 2026-02-14 as part of v1.0 milestone completion*
