# Milestone v1.6: Memory Agent

**Status:** ðŸ“‹ PLANNED
**Phases:** 22â€“26
**Total Plans:** TBD

## Overview

Memory Agent converts high-value system events into durable, queryable knowledge and surfaces that knowledge back into the workflow as context. Informational only â€” no outcomes are blocked or altered.

## Phases

### Phase 22: Memory Foundation âœ“ (planned)

**Goal:** Storage, schema, config, add_record API, dedup.

**Requirements:** MEM-01, MEM-02, MEM-03, MEM-04, MEM-05, MEM-13, MEM-14, MEM-24, MEM-25, MEM-26

**Depends on:** Nothing

**Success Criteria:**
1. Records persist to memory.jsonl; writes are atomic; reads tolerate partial last line
2. memory.add_record(record) API accepts MemoryRecord; dedup within 24h by (type, repo, sha, fingerprint, pr_number)
3. .booty.yml memory block (enabled, retention_days, max_matches, comment_on_pr, comment_on_incident_issue); env overrides; unknown keys fail Memory only

**Plans:** TBD (2â€“3 plans)

---

### Phase 23: Ingestion âœ“ (planned)

**Goal:** Wire adapters from Observability, Governor, Security, Verifier, Revert.

**Requirements:** MEM-06, MEM-07, MEM-08, MEM-09, MEM-10, MEM-11, MEM-12

**Depends on:** Phase 22

**Success Criteria:**
1. Observability issue-from-Sentry â†’ incident record stored
2. Governor HOLD â†’ governor_hold; deploy failure â†’ deploy_failure
3. Security FAIL â†’ security_block; ESCALATE â†’ security_block with reason
4. Verifier FAIL (import/compile/test) â†’ verifier_cluster
5. Revert commits on main â†’ revert record

**Plans:** TBD (2â€“3 plans)

---

### Phase 24: Lookup âœ“ (planned)

**Goal:** Deterministic query engine by paths, fingerprint, ecosystem.

**Requirements:** MEM-15, MEM-16, MEM-17, MEM-18

**Depends on:** Phase 22

**Success Criteria:**
1. Query accepts paths, repo, sha; returns matches from last 90 days
2. Match by path intersection OR fingerprint; sort by severity, recency, path overlap
3. Deterministic; <1s for 10k records

**Plans:** TBD (1â€“2 plans)

---

### Phase 25: Surfacing âœ“ (planned)

**Goal:** Surface context in Builder PR, Governor HOLD, Observability incident.

**Requirements:** MEM-19, MEM-20, MEM-21, MEM-22, MEM-23

**Depends on:** Phase 24

**Success Criteria:**
1. Builder PR gets single updatable "Memory: related history" comment (marker `<!-- booty-memory -->`), up to 3 matches
2. Governor HOLD details include 1â€“2 memory links when relevant
3. Observability incident issue includes "Related history" section with up to 3 matches
4. Memory never blocks or alters outcomes

**Plans:** TBD (2â€“3 plans)

---

### Phase 26: CLI âœ“ (planned)

**Goal:** booty memory status and booty memory query.

**Requirements:** MEM-27, MEM-28

**Depends on:** Phase 22, Phase 24

**Success Criteria:**
1. `booty memory status` prints enabled, record count, retention
2. `booty memory query --pr <n>` or `--sha <sha>` prints matches; supports `--json`

**Plans:** TBD (1 plan)

---

## Progress

| Phase | Goal | Plans | Status |
|-------|------|-------|--------|
| 22. Memory Foundation | Storage, config, API | TBD | Not started |
| 23. Ingestion | Wire adapters | TBD | Not started |
| 24. Lookup | Query engine | TBD | Not started |
| 25. Surfacing | PR, Governor, Observability | TBD | Not started |
| 26. CLI | status, query | TBD | Not started |

---
*Created: 2026-02-16*
